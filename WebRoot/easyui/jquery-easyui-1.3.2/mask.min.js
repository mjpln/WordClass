(function(n){function t(t,i){var r=n(t),s,h,u,f,e,o,c;return n("div.mask",r).length&&r.mask("hide"),r.attr("position",r.css("position")),r.attr("overflow",r.css("overflow")),r.css("position","relative"),r.css("overflow","hidden"),s={position:"absolute",left:0,top:0,cursor:"wait",background:"#ccc",opacity:i.opacity,filter:"alpha(opacity="+i.opacity*100+")",display:"none"},h={position:"absolute",width:"auto",padding:"10px 20px",border:"2px solid #ccc",color:"white",cursor:"wait",display:"none",borderRadius:5,background:"black",opacity:.6,filter:"alpha(opacity=60)"},t=="body"?(u=Math.max(document.documentElement.clientWidth,document.body.clientWidth),f=Math.max(document.documentElement.clientHeight,document.body.clientHeight)):(u=r.outerWidth()||"100%",f=r.outerHeight()||"100%"),n('<div class="mask"><\/div>').css(n.extend({},s,{display:"block",width:u,height:f,zIndex:i.zIndex})).appendTo(r),c=n('<div class="mask-msg"><\/div>').html(i.maskMsg).appendTo(r).css(h),t=="body"?(e=(Math.max(document.documentElement.clientWidth,document.body.clientWidth)-n("div.mask-msg",r).outerWidth())/2,o=document.documentElement.clientHeight>document.body.clientHeight?(Math.max(document.documentElement.clientHeight,document.body.clientHeight)-n("div.mask-msg",r).outerHeight())/2:(Math.min(document.documentElement.clientHeight,document.body.clientHeight)-n("div.mask-msg",r).outerHeight())/2):(e=(r.width()-n("div.mask-msg",r).outerWidth())/2,o=(r.height()-n("div.mask-msg",r).outerHeight())/2),c.css({display:"block",zIndex:i.zIndex+1,left:e,top:o}),setTimeout(function(){r.mask("hide")},i.timeout),r}n.fn.mask=function(i){return typeof i=="string"?n.fn.mask.methods[i](this):(i=n.extend({},n.fn.mask.defaults,i),t(this,i))},n.mask=function(i){return typeof i=="string"?n.fn.mask.methods[i]("body"):(i=n.extend({},n.fn.mask.defaults,i),t("body",i))},n.mask.hide=function(){n("body").mask("hide")},n.fn.mask.methods={hide:function(t){return t.each(function(){var t=n(this);n("div.mask",t).fadeOut(function(){n(this).remove()}),n("div.mask-msg",t).fadeOut(function(){n(this).remove(),t.css("position",t.attr("position")),t.css("overflow",t.attr("overflow"))})})}},n.fn.mask.defaults={maskMsg:"加载……",zIndex:1e5,timeout:3e4,opacity:.6}})(jQuery);